
<script>
    const STORAGE_KEY = "ban_nhau_user_seed";
    const RESULT_KEY = "ban_nhau_today_result";

    // HÃ m táº¡o má»™t sá»‘ ID "á»•n Ä‘á»‹nh" cho ngÆ°á»i dÃ¹ng dá»±a trÃªn nhiá»u yáº¿u tá»‘
    function getStableUserId() {
        // Thá»­ láº¥y tá»« localStorage trÆ°á»›c (náº¿u Ä‘Ã£ táº¡o)
        let storedSeed = localStorage.getItem(STORAGE_KEY);
        if (storedSeed) {
            return storedSeed;
        }
        // Náº¿u chÆ°a cÃ³, táº¡o má»™t seed má»›i vÃ  lÆ°u (sáº½ dÃ¹ng mÃ£i mÃ£i cho trÃ¬nh duyá»‡t nÃ y)
        // Káº¿t há»£p thá»i gian, má»™t sá»‘ ngáº«u nhiÃªn vÃ  cÃ¡c thÃ´ng tin trÃ¬nh duyá»‡t cÃ³ sáºµn
        const newSeed = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        localStorage.setItem(STORAGE_KEY, newSeed);
        return newSeed;
    }

    // HÃ m táº¡o káº¿t quáº£ cho ngÃ y hÃ´m nay
    function getTodaysResult(userId) {
        const today = new Date().toDateString(); // Chuá»—i Ä‘á»‹nh dáº¡ng ngÃ y, vÃ­ dá»¥ "Mon Jan 02 2023"

        // Láº¥y káº¿t quáº£ Ä‘Ã£ lÆ°u cho ngÃ y hÃ´m nay
        let dailyResults = JSON.parse(localStorage.getItem(RESULT_KEY) || '{}');

        // Náº¿u chÆ°a cÃ³ káº¿t quáº£ cho ngÃ y hÃ´m nay, hoáº·c káº¿t quáº£ khÃ´ng cÃ³ userId nÃ y, thÃ¬ táº¡o má»›i
        if (!dailyResults[today] || !dailyResults[today][userId]) {
            // Táº¡o má»™t sá»‘ ngáº«u nhiÃªn dá»±a trÃªn userId vÃ  ngÃ y hÃ´m nay
            // Äiá»u nÃ y Ä‘áº£m báº£o cÃ¹ng userId + cÃ¹ng ngÃ y = cÃ¹ng má»™t sá»‘
            const seed = today + userId;
            let hash = 0;
            for (let i = 0; i < seed.length; i++) {
                hash = ((hash << 5) - hash) + seed.charCodeAt(i);
                hash = hash & hash;
            }
            const randomValue = Math.abs(hash) % 10; // Sá»‘ tá»« 0-9

            // Tá»· lá»‡: 8 trÃºng, 2 tráº­t (sá»‘ 8 vÃ  9 lÃ  "tráº­t")
            const result = (randomValue >= 8) ?
                "ğŸ˜† CHÃšC MAY Máº®N Láº¦N SAU" :
                [
                    "ğŸº CHÃšC Má»ªNG Báº N TRÃšNG THÆ¯á»NG 1 PHIáº¾U CHÄ‚M SÃ“C DA CÆ  Báº¢N Táº I KKB â€“ Uá»NG 1/2 LY",
                    "ğŸ» CHÃšC Má»ªNG Báº N TRÃšNG THÆ¯á»NG 1 PHIáº¾U CHÄ‚M SÃ“C DA CÆ  Báº¢N Táº I KKB â€“ Uá»NG 1 LY",
                    "ğŸºğŸº CHÃšC Má»ªNG Báº N TRÃšNG THÆ¯á»NG 1 PHIáº¾U CHÄ‚M SÃ“C DA CÆ  Báº¢N Táº I KKB â€“ Uá»NG 2 LY"
                ][randomValue % 3]; // Láº¥y 1 trong 3 káº¿t quáº£ trÃºng thÆ°á»Ÿng

            // LÆ°u káº¿t quáº£ nÃ y cho userId trong ngÃ y hÃ´m nay
            if (!dailyResults[today]) {
                dailyResults[today] = {};
            }
            dailyResults[today][userId] = result;
            localStorage.setItem(RESULT_KEY, JSON.stringify(dailyResults));
        }

        // Tráº£ vá» káº¿t quáº£ Ä‘Ã£ lÆ°u (hoáº·c vá»«a táº¡o) cho userId trong ngÃ y hÃ´m nay
        return dailyResults[today][userId];
    }

    // Cháº¡y chÆ°Æ¡ng trÃ¬nh
    const userId = getStableUserId();
    const resultText = getTodaysResult(userId);
    document.getElementById("kq").innerHTML = resultText;
</script>
